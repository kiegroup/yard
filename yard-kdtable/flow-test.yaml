# camel-k: language=yaml dependency=github:kiegroup.yard/yard-kdtable/camelk-SNAPSHOT

- beans:
  - name: mmbean
    type: org.drools.yard.kdtable.KdtableProcessor
    properties:
      kdtable: |
        type: DecisionTable
        inputs: ['Age', 'Previous incidents?']
        rules:
        - when: ['<21', false]
          then: 800
        - when: ['<21', true]
          then: 1000
        - when: ['>=21', false]
          then: 500
        - when: ['>=21', true]
          then: 600
- from:
    uri: "timer:yaml"
    parameters:
      period: "5000"
    steps:
      - setBody:
          constant: "Hello Camel K from yaml"
      - process:
          ref: 'mmbean'
      - transform:
          simple: "${body.toUpperCase()}"
      - to: "log:info"
